<!DOCTYPE html>
<html lang="vi" data-hero="forgot">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>D-cine — Quên / Đặt lại mật khẩu</title>
<link rel="stylesheet" href="../assets/css/variable.css?v=8">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../assets/css/auth.forgot.css">
</head>
<body>
  <main class="stage">
    <section class="card" aria-label="Khôi phục mật khẩu">
      <div class="topbar">
        <a class="back" href="D_cine_login.html" aria-label="Quay lại đăng nhập">
          <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span class="back-text">Quay lại</span>
        </a>
        <div class="brand"><span class="d">D</span><span>-cine</span></div>
      </div>

      <div class="stack">
        <!-- View A: FORGOT / OTP -->
        <div id="view-forgot" class="view">
          <h1 class="h1">Quên mật khẩu</h1>
          <p class="sub">Nhập <b>Email</b> hoặc <b>Số điện thoại</b> để nhận mã OTP. Sau khi xác thực, bạn sẽ đặt lại mật khẩu mới.</p>

          <div id="forgotMsg" class="hint" style="display:none; color:#35c28b"></div>
          <div id="forgotErr" class="err" style="display:none"></div>

          <form id="forgotForm" novalidate>
            <div class="field">
              <label for="ident">Email hoặc Số điện thoại</label>
              <div class="input" id="identBox">
                <span class="prefix" id="identIcon" aria-hidden="true">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2zm0 0l8 6 8-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </span>
                <input id="ident" type="text" placeholder="yourname@example.com hoặc 0xxxxxxxxx" autocomplete="email" aria-describedby="err-ident">
                <button class="icon-btn suffix" id="swapIdent" type="button" title="Đổi Email/SĐT">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 7h13l-3-3m3 3l-3 3M21 17H8l3 3m-3-3l3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </button>
              </div>
              <p class="err" id="err-ident"></p>
            </div>

            <button class="btn" id="sendOtpBtn" type="button">Gửi OTP</button>

            <div class="otp-wrap">
              <label for="otp1" style="font-size:12.5px; font-weight:600">Nhập mã OTP</label>
              <div class="otp-row" id="otpRow" aria-describedby="otpHelp">
                <input class="otp" id="otp1" inputmode="numeric" maxlength="1" pattern="[0-9]*" autocomplete="one-time-code">
                <input class="otp" id="otp2" inputmode="numeric" maxlength="1" pattern="[0-9]*">
                <input class="otp" id="otp3" inputmode="numeric" maxlength="1" pattern="[0-9]*">
                <input class="otp" id="otp4" inputmode="numeric" maxlength="1" pattern="[0-9]*">
                <input class="otp" id="otp5" inputmode="numeric" maxlength="1" pattern="[0-9]*">
                <input class="otp" id="otp6" inputmode="numeric" maxlength="1" pattern="[0-9]*">
              </div>
              <p class="hint" id="otpHelp">OTP gồm 6 số. <span id="resendHint"></span></p>
              <p class="err" id="err-otp"></p>
            </div>

            <button class="btn btn-ghost" id="verifyBtn" type="button">Xác nhận OTP</button>
          </form>
        </div>

        <!-- View B: RESET -->
        <div id="view-reset" class="view hide" aria-hidden="true">
          <h1 class="h1">Tạo mật khẩu mới</h1>
          <p class="sub">Đặt mật khẩu mạnh và dễ nhớ với bạn.</p>

          <div id="resetMsg" class="hint" style="display:none; color:#35c28b"></div>
          <div id="resetErr" class="err" style="display:none"></div>

          <form id="resetForm" novalidate>
            <div class="field">
              <label for="newpass">Mật khẩu mới</label>
              <div class="input" id="newBox">
                <span class="prefix" aria-hidden="true">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="11" width="18" height="10" rx="2" stroke="currentColor" stroke-width="2"/><path d="M7 11V8a5 5 0 1110 0v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </span>
                <input id="newpass" type="password" placeholder="••••••••" autocomplete="new-password">
                <button id="toggle1" class="icon-btn suffix" type="button" aria-pressed="false">
                  <svg id="eyeOff1" class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 3l18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M10.58 10.58A3 3 0 0012 15a3 3 0 001.42-.38" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M17.94 17.94C15.9 19.22 13.54 20 12 20 6 20 3 12 3 12a17.9 17.9 0 013.06-4.95" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M10.73 5.08A9.84 9.84 0 0112 4c6 0 9 8 9 8a17.83 17.83 0 01-2.5 4.15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                  <svg id="eyeOn1"  class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display:none"><path d="M1 12s3-8 11-8 11 8 11 8-3 8-11 8S1 12 1 12z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                </button>
              </div>
              <div class="pw-meter" aria-hidden="true"><span id="pwBar"></span></div>
              <p class="hint">Tối thiểu 8 ký tự, gồm chữ và số; có ký tự đặc biệt sẽ mạnh hơn.</p>
              <p class="err" id="err-new"></p>
            </div>

            <div class="field">
              <label for="conf">Xác nhận mật khẩu</label>
              <div class="input" id="confBox">
                <span class="prefix" aria-hidden="true">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="11" width="18" height="10" rx="2" stroke="currentColor" stroke-width="2"/><path d="M7 11V8a5 5 0 1110 0v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </span>
                <input id="conf" type="password" placeholder="Nhập lại mật khẩu" autocomplete="new-password">
                <button id="toggle2" class="icon-btn suffix" type="button" aria-pressed="false">
                  <svg id="eyeOff2" class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 3l18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M10.58 10.58A3 3 0 0012 15a3 3 0 001.42-.38" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M17.94 17.94C15.9 19.22 13.54 20 12 20 6 20 3 12 3 12a17.9 17.9 0 013.06-4.95" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                  <svg id="eyeOn2"  class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display:none"><path d="M1 12s3-8 11-8 11 8 11 8-3 8-11 8S1 12 1 12z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                </button>
              </div>
              <p class="err" id="err-conf"></p>
            </div>

            <button class="btn" id="resetBtn" type="submit" disabled>Đặt lại mật khẩu</button>
          </form>
        </div>
      </div>
    </section>
  </main>
  <script src="../assets/js/auth.forgot.js"></script>
</body>
</html>

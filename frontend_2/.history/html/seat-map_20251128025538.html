<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>D-cine — Chọn ghế (Seat Map)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Core CSS -->
  <link rel="stylesheet" href="../assets/css/variable.css?v=12">
  <link rel="stylesheet" href="../assets/css/base.css?v=12">
  <link rel="stylesheet" href="../assets/css/layout.css?v=12">
  <link rel="stylesheet" href="../assets/css/header.css?v=12">
  <link rel="stylesheet" href="../assets/css/main.css?v=12">
  <link rel="stylesheet" href="../assets/css/components.css?v=12">
  <link rel="stylesheet" href="../assets/css/footer.css?v=12">

  <!-- Page CSS -->
  <link rel="stylesheet" href="../assets/css/seat-map.css?v=6">
</head>
<body>
  <!-- include header -->
  <div id="hdr-include"></div>

<main class="container seatmap-page">
  <nav id="bc" class="breadcrumb" aria-label="Bạn đang ở đây"></nav>


    <div class="seat-layout">
      <!-- Cột trái: Thông tin phim -->
<aside class="side left">
  <div class="movie-card-info">
    <div class="poster-wrap">
      <img id="mvPoster" alt="Poster phim" />

      <!-- Nút play overlay -->
      <button class="poster-play" id="posterPlayBtn" type="button" hidden>
        <img src="../assets/icons/ic-play.svg" alt="Xem trailer">
      </button>
    </div>



    <div class="info-wrap">
      <h1 id="mvTitle" class="mv-title">—</h1>
      <div id="mvMeta" class="mv-meta small">—</div>

      <div class="showtime-block" id="showBlock">
        <div class="row"><span>Rạp:</span><strong id="mvTheater">—</strong></div>
        <div class="row"><span>Ngày:</span><strong id="mvDate">—</strong></div>
        <div class="row"><span>Suất:</span><strong id="mvTime">—</strong></div>
        <div class="row"><span>Định dạng:</span><strong id="mvFormat">—</strong></div>
      </div>

      <div class="cta-row">
        <a class="btn outline back" href="#" id="btnBackShowtimes">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"/></svg>
          <span>Quay lại lịch chiếu</span>
        </a>
      </div>
    </div>
  </div>
</aside>


      <!-- Cột phải: Sơ đồ ghế -->
      <section class="side right" aria-label="Sơ đồ ghế">
        <div class="auditorium">
          <div class="screen-wrap" aria-hidden="true">
            <svg class="screen-svg" viewBox="0 0 1000 140" preserveAspectRatio="none">
              <defs>
                <path id="screen-arc" d="M60,110 Q500,24 940,110" />
                <filter id="glow"><feGaussianBlur stdDeviation="4" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
              </defs>
              <use href="#screen-arc" class="screen-stroke" filter="url(#glow)"></use>
              <text class="screen-text">
                <textPath href="#screen-arc" startOffset="50%" text-anchor="middle">SCREEN</textPath>
              </text>
            </svg>
          </div>

          <div class="zone-chips" aria-hidden="true">
            <span class="chip vip">VIP A–C</span>
            <span class="chip std">Standard D–I</span>
            <span class="chip couple">Couple J</span> 
          </div>
          <div id="seatGrid" class="seat-grid" role="grid" aria-label="Seat map"></div>
        </div>

        <!-- Legend -->
        <ul class="legend" aria-label="Chú thích ghế">
          <li><span class="chip-color selected"></span><span> Selected</span></li>
          <li><span class="chip-color available"></span><span> Available</span></li>
          <li><span class="chip-color booked"></span><span> Booked</span></li>
          <li><span class="chip-color vip"></span><span> VIP</span></li>
          <li><span class="chip-color std"></span><span> Standard</span></li>
          <li><span class="chip-color couple"></span><span> Couple (Đôi)</span></li>
        </ul>

        <!-- Summary sticky -->
        <section class="summary" aria-live="polite">
          <div class="summary-head">
            <h2>Chọn loại vé</h2>
            <div id="selCount" class="small muted">0 ghế được chọn</div>
          </div>

          <div id="selList" class="sel-list"></div>
          <div class="price-matrix" id="priceMatrix"></div>

          <div class="breakdown">
            <div class="line"><span>ODC ADULT <span id="adCount">(x0)</span></span><span id="adTotal">0đ</span></div>
            <div class="line"><span>ODC CHILD <span id="chCount">(x0)</span></span><span id="chTotal">0đ</span></div>
            <hr>
            <div class="line total"><span>TỔNG</span><strong id="grandTotal">0đ</strong></div>
          </div>

          <div id="hint" class="hint muted" aria-live="polite"></div>

          <div class="cta-row end">
            <a class="btn outline" href="#" id="btnBackMovie">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path fill="currentColor" d="M14.5 6.5 9 12l5.5 5.5-1.5 1.5L6 12l7-7 1.5 1.5Z"/>
              </svg>
              <span>Quay lại phim</span>
            </a>

            <button class="btn" id="btnContinue" type="button" disabled>
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path fill="currentColor" d="m9 5 8 7-8 7V5Z"/>
              </svg>
              <span>Tiếp tục</span>
            </button>

            <button class="btn outline" id="btnPay" type="button" disabled>
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path fill="currentColor" d="M3 6h18a2 2 0 0 1 2 2v1H1V8a2 2 0 0 1 2-2Zm-2 5h22v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-5Zm5 3h6v2H6v-2Z"/>
              </svg>
              <span>Thanh toán ngay</span>
            </button>
          </div>
        </section>

      </section>
    </div>
    <!-- Seat type popover -->
<div id="seatPopover" class="popover" hidden>
  <div class="popover-backdrop"></div>
  <div class="popover-content" role="dialog" aria-modal="true" aria-labelledby="popoverTitle">
    <h3 id="popoverTitle">Chọn vé cho ghế</h3>
    <div class="popover-actions">
      <button id="pickAdult" class="btn">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm0 2c-3.87 0-7 3.13-7 7h2a5 5 0 0 1 10 0h2c0-3.87-3.13-7-7-7Z"/>
        </svg>
        <span id="labelAdult">ODC Adult</span>
      </button>

      <!-- Child -->
      <button id="pickChild" class="btn outline">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M12 9.5A2.5 2.5 0 1 0 12 4a2.5 2.5 0 0 0 0 5.5ZM12 11c-3.04 0-5.5 2.46-5.5 5.5h2a3.5 3.5 0 0 1 7 0h2c0-3.04-2.46-5.5-5.5-5.5Z"/>
        </svg>
        <span id="labelChild">ODC Child</span>
      </button>
      <button id="pickCancel" class="btn danger">Hủy</button>
    </div>
  </div>
</div>

  </main>

  <!-- include footer -->
  <div id="footer-include"></div>

  <script>
    /* Fallback path: thử ../data trước, nếu không có thì /data */
    window.API_BASE  = window.API_BASE  || '/api';
    window.DATA_BASE = window.DATA_BASE || (location.pathname.includes('/html/') ? '../data' : '/data');
  </script>
  <script src="../assets/js/main.js" defer></script>
  <script src="../assets/js/seatmap.js?v=6" defer></script>
</body>
</html>
